(function() {
  "use strict";
  new Vue({
    el: "#app",
    data: {
      gas: "https://script.google.com/macros/s/AKfycbxnOZYVIB_6C4YYa8lGYN80sWp48weTagkPenCDUzBOGBi4_9fkXDDbsIuSzepMvGAr2Q/exec", // ← 改成你的 GAS 網址
      name: "",     // 使用者輸入的姓名
      id: "",       // 查詢結果的 ID
      persons: {},  // 所有資料
      loading: false
    },
    methods: {
      fetchAll: function() {
        this.loading = true;
        fetch(this.gas)
          .then(res => res.json())
          .then(data => {
            this.persons = data;
            this.loading = false;
          });
      },
      lookupByName: function() {
        const trimmedName = this.name.trim();
        const match = Object.entries(this.persons).find(([id, person]) => person.name === trimmedName);
        this.id = match ? match[0] : "";
      }
    },
    mounted: function() {
      this.fetchAll();
    }
  });
})();

